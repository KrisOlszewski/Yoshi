/*!Yoshi v0.0.1 | Friday, January 23rd, 2015, 11:26:46 PM | 2014 Kris Olszewski*/!function($){var o=$({});$.subscribe=function(){o.on.apply(o,arguments)},$.unsubscribe=function(){o.off.apply(o,arguments)},$.publish=function(){o.trigger.apply(o,arguments)}}(jQuery),function($,window){"use strict";var Yoshi={};Yoshi.init=function(config){this.cache(config),this.bind()},Yoshi.cache=function(config){config=config||{},this.config={},this.config.container=config.container||"body",this.config.withBang=config.withBang===!1?!1:!0,this.config.pageExt=config.pageExt||".html",this.config.transitionIn=config.transitionIn||"transition.slideDownBigIn",this.config.transitionOut=config.transitionOut||"transition.slideUpBigOut",this.config.activeNav=config.activeNav||"is-active",this.config.withBang?(this.config.defaultView="!"+(config.defaultView||"welcome"),this.config.missingView="!"+(config.missingView||"not-found")):(this.config.defaultView=config.defaultView||"welcome",this.config.missingView=config.missingView||"not-found"),this.$win=$(window)},Yoshi.bind=function(){var _this=this;_this.$win.on("hashchange.yoshi",function(){_this.routeManager()}),_this.$win.on("load.yoshi",function(){_this.routeManager()}),_this.$win.on("resize.yoshi",_this.throttle(function(){_this.setHeight()})),$.subscribe("yoshi.getView",function(name,html,view){_this.viewManager(html,view)}),$.subscribe("yoshi.notFound",function(){_this.setHash(_this.config.missingView)})},Yoshi.routeManager=function(){var _this=this,route=_this.getHash(),section=$("[data-view]:visible").data("view");return route.length?void(route!==section&&_this.getView(route)):void _this.setHash(_this.config.defaultView)},Yoshi.viewManager=function(html,view){var _this=this,$section=$("[data-view]:visible");$(_this.config.container).prepend(html),_this.setHeight(),_this.setNavState(view),$section.length?_this.animateOut(view):_this.animateIn(view)},Yoshi.animateOut=function(view){var _this=this,$section=$("[data-view]:visible");$section.velocity(_this.config.transitionOut,{complete:function(){$section.remove(),_this.animateIn(view)}})},Yoshi.animateIn=function(view){var _this=this,$section=$('[data-view="'+view+'"]');$section.velocity(_this.config.transitionIn)},Yoshi.setNavState=function(view){$("[data-href]").removeClass(this.config.activeNav),$('[data-href="'+view+'"]').addClass(this.config.activeNav)},Yoshi.setHeight=function(){var winHeight=$(window).height();$("[data-height]").css("min-height",winHeight)},Yoshi.getView=function(route){var view=route;$.ajax({url:view+this.config.pageExt,cache:!1}).done(function(html){$.publish("yoshi.getView",[html,view])}).fail(function(){$.publish("yoshi.notFound")})},Yoshi.getHash=function(){return window.location.hash.substring(this.config.withBang?2:1).replace(/^\/|\/$/g,"")},Yoshi.setHash=function(hash){window.location.hash=hash},Yoshi.throttle=function(func,delay){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer),timer=setTimeout(function(){func.apply(context,args)},delay||500)}},window.Yoshi=Yoshi}(jQuery,window,document);