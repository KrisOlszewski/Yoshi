/*!Yoshi v0.0.1 | Saturday, March 21st, 2015, 10:54:25 AM | 2014 Kris Olszewski*/!function($){var o=$({});$.subscribe=function(){o.on.apply(o,arguments)},$.unsubscribe=function(){o.off.apply(o,arguments)},$.publish=function(){o.trigger.apply(o,arguments)}}(jQuery),function($,window){"use strict";var Yoshi={};Yoshi.init=function(config){this.cache(config),this.bind()},Yoshi.cache=function(config){this.config=config||{},this.config.container=config.container||"body",this.config.withBang=config.withBang===!1?!1:!0,this.config.pageExt=config.pageExt||".html",this.config.transitionIn="transition."+(config.transitionIn||"slideDownBigIn"),this.config.transitionOut="transition."+(config.transitionOut||"slideUpBigOut"),this.config.activeNav=config.activeNav||"is-active",this.config.defaultView=(this.config.withBang?"!":"")+(config.defaultView||"welcome"),this.config.missingView=(this.config.withBang?"!":"")+(config.missingView||"not-found"),"function"==typeof config.onBeforeChange&&$.subscribe("yoshi.currentView",function(name,view){view="undefined"==typeof view?null:view,config.onBeforeChange(view)}),"function"==typeof config.onAfterChange&&$.subscribe("yoshi.getView",function(name,html,view){config.onAfterChange(view)}),this.$win=$(window)},Yoshi.bind=function(){var _this=this;_this.$win.on("hashchange.yoshi",function(){_this.routeManager()}),_this.$win.on("load.yoshi",function(){_this.routeManager()}),_this.$win.on("resize.yoshi",_this.throttle(function(){_this.setHeight()})),$.subscribe("yoshi.getView",function(name,html,view){_this.viewManager(html,view)}),$.subscribe("yoshi.notFound",function(){_this.setHash(_this.config.missingView)})},Yoshi.routeManager=function(){var _this=this,route=_this.getHash(),view=$("[data-view]:visible").data("view");return route.length?void(route!==view&&($.publish("yoshi.currentView",view),_this.getView(route))):void _this.setHash(_this.config.defaultView)},Yoshi.viewManager=function(html,view){var _this=this,$section=$("[data-view].is-active");$(_this.config.container).prepend(html),_this.setHeight(),_this.setNavState(view),$section.length?_this.animateOut(view):_this.animateIn(view)},Yoshi.animateOut=function(view){var _this=this,$section=$("[data-view].is-active");$section.velocity(_this.config.transitionOut,{complete:function(){$section.remove(),_this.animateIn(view)}})},Yoshi.animateIn=function(view){var _this=this,$section=$('[data-view="'+view+'"]').addClass("is-active");$section.velocity(_this.config.transitionIn)},Yoshi.setNavState=function(view){$("[data-href]").removeClass(this.config.activeNav),$('[data-href="'+view+'"]').addClass(this.config.activeNav)},Yoshi.setHeight=function(){var winHeight=$(window).height();$("[data-height]").css("height",winHeight)},Yoshi.getView=function(route){var view=route;$.ajax({url:view+this.config.pageExt,cache:!1}).done(function(html){$.publish("yoshi.getView",[html,view])}).fail(function(){$.publish("yoshi.notFound")})},Yoshi.getHash=function(){return window.location.hash.substring(this.config.withBang?2:1).replace(/^\/|\/$/g,"")},Yoshi.setHash=function(hash){window.location.hash=hash},Yoshi.throttle=function(func,delay){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer),timer=setTimeout(function(){func.apply(context,args)},delay||500)}},window.Yoshi=Yoshi}(jQuery,window,document);